# LO Task
#### REST API для управления сущностью Task с асинхронным логированием

## Содержание
- [Разработка](#разработка)
- [Запуск](#запуск)
- [Документация к API](#документация-к-api-и-примеры-запросов)
- [Функциональность](#функциональность)

### Разработка
---
- Реализовано in memory хранилище, через map и RWMutex.
- Реализован базовый механизм graceful shutdown.
- Реализован rate limiting.
- Реализована валидация входящих запросов.
- Реализовано асинхронное логирование.
- Написан dockerfile и docker-compose файлы. Приложение собирается в контейнер и крутится в докере.

### Запуск
---
Для запуска выполните команду, находясь в директории /deployments
```sh
$ docker compose up
```

По умолчанию проект запускается на порту 8080. Для изменения порта, нужноизменить значение переменной APP_PORT в .env

### Документация к API и примеры запросов
---

Все запросы проходят валидацию. 

#### 1. **Создание задачи**  
**`POST /tasks`**  
Создает задачу

**Тело запроса (JSON)**:
```json
{
  "title": "task_title",
  "description": "task_description",
  "status": "Новая"
}
```

**Параметры**:
| Поле        | Тип    | Обязательно | Описание         |
|-------------|--------|-------------|------------------|
|    title    | string | Да          | Заголовок задачи |
| description | string | Да          |  Описание задачи |
|    status   | string | Да          |      Статус      |

**Пример запроса**:
```bash
curl -X POST http://localhost:8080/tasks \
  -H "Content-Type: application/json" \
  -d    '{
            "title": "task_title",
            "description": "task_description",
            "status": "Новая"
        }'
```

**Успешный ответ** (`200 OK`):
```json
{
  "id": "185ba1402e69b69829f59cd3f3bc76ea",
  "title": "task_title",
  "description": "task_description",
  "status": "Новая",
  "created_at": "2025-08-14T15:16:16.819599+03:00"
}
```

**Ошибки**:
- `400 Bad Request` - Невалидные данные:
```json
{
  "type": "invalid request body",
  "message": "description is required"
}
```
---

#### 2. **Получение задачи по id**  
**`GET /tasks/{id}`**  
Возвращает найденную задачу.  

**Path-параметры**:
| Параметр | Тип     | Обязательно | Описание          |
|----------|---------|-------------|-------------------|
| id       | string  | Да          |  id задачи        |

**Пример запроса**:
```bash
curl "http://localhost:8080/tasks/185ba1402e69b69829f59cd3f3bc76ea"
```

**Успешный ответ** (`200 OK`):
```json
{
  "id": "185ba1402e69b69829f59cd3f3bc76ea",
  "title": "task_title",
  "description": "task_description",
  "status": "Новая",
  "created_at": "2025-08-14T15:16:16.819599+03:00"
}
```

**Ошибки**:
- `404 Not found` - Задача не найдена:
---

#### 3. **Получение списка задач**  
**`GET /tasks`**  
Возвращает список задач. Если статус не указан, возвращаются все задачи.

**Query-параметры**:
| Параметр | Тип   | Обязательно | Описание          |
|----------|-------|-------------|-------------------|
| status  | string  | Да          | Статус задачи    |

**Пример запроса**:
```bash
curl http://localhost:8080/tasks?status=Новая
```

**Успешный ответ** (`200 OK`):
```json
{
  "id": "185ba1402e69b69829f59cd3f3bc76ea",
  "title": "task_title",
  "description": "task_description",
  "status": "Новая",
  "created_at": "2025-08-14T15:16:16.819599+03:00"
}
```
---

#### 3. **Получение списка статусов**  
**`GET /tasks/statuse`**  
Возвращает список статусов.

**Пример запроса**:
```bash
curl http://localhost:8080/tasks/statuses
```

**Успешный ответ** (`200 OK`):
```json
["Новая","В работе","На паузе","Завершена","Отменена"]
```
---

### Примечания
1. **Лимиты**:  
   - Максимальное количество запросов в течение 1 секунды с одного IP: 100
2. **Таймауты**:
   - Для каждого запроса выставлен таймаут в 3 секунды

### Функциональность
Реализованный API имеет следующие методы:
- Получение списка задач
- Получение задачи по ее id
- Создание задачи
- Получение списка статусов